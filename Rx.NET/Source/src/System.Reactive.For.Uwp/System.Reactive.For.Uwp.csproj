<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <!-- Note: our workaround for the lack of uap10.0.xxxxx support requires use of TargetFrameworks (plural)
    even when there's just a single target. -->
    <TargetFrameworks>uap10.0.18362</TargetFrameworks>
    <RootNamespace>System.Reactive.Uwp</RootNamespace>

  <PackageTags>Rx;Reactive;Extensions;Observable;LINQ;Events;Windows Forms</PackageTags>
    <Description>Reactive Extensions (Rx) for .NET</Description>

    <PackageReadmeFile>readme.md</PackageReadmeFile>
  </PropertyGroup>

  <PropertyGroup>
    <Nullable>enable</Nullable>    
  </PropertyGroup>

  <ItemGroup>
    <!-- 19041 not 18362 because the Azure DevOps hosted build agents don't offer 18362, and there appears
         not to be any official supported way to get it on there.
         We end up with a reference to Windows 255.255.255.255 in any case, so as far as I can tell, this
         produces results indistinguishable from what we would get with 18362. The only issue here is that
         in theory it makes it possible for the code to refer to an API that is not available on 18362. In
         practice, we're not doing that, and we don't expect to change this code much in the future, so it
         shouldn't happen.
    -->
    <ReferencePath Include="$(TargetPlatformSdkPath)UnionMetadata\10.0.19041.0\Windows.winmd" />
  </ItemGroup>

  <ItemGroup>
    <Compile Include="..\AssemblyInfo.cs" Link="Properties\AssemblyInfo.cs" />
    <Compile Include="..\System.Reactive.For.WindowsRuntime\AsyncInfoExtensions.cs" Link="AsyncInfoExtensions.cs" />
    <Compile Include="..\System.Reactive.Net\Concurrency\UserWorkItem.cs" Link="UserWorkItem.cs" />
    <Compile Include="..\System.Reactive.Net\Diagnostics\CodeAnalysis\NullableAttributes.cs" Link="NullableAttributes.cs" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\System.Reactive.Net\System.Reactive.Net.csproj" />
    <ProjectReference Include="..\System.Reactive.For.WindowsRuntime\System.Reactive.For.WindowsRuntime.csproj" />
  </ItemGroup>

  <ItemGroup>
    <Compile Update="Strings_PlatformServices.Designer.cs">
      <DependentUpon>$([MSBuild]::ValueOrDefault('%(Filename)', '').Replace('.Designer.cs', '.resx'))</DependentUpon>
    </Compile>
  </ItemGroup>

  <ItemGroup>
    <Compile Update="Strings_PlatformServices.Designer.cs">
      <DesignTime>True</DesignTime>
      <AutoGen>True</AutoGen>
      <DependentUpon>Strings_PlatformServices.resx</DependentUpon>
    </Compile>
  </ItemGroup>

  <ItemGroup>
    <EmbeddedResource Update="Strings_PlatformServices.resx">
      <Generator>ResXFileCodeGenerator</Generator>
      <LastGenOutput>Strings_PlatformServices.Designer.cs</LastGenOutput>
    </EmbeddedResource>
  </ItemGroup>

  <ItemGroup>
    <None Include="build\NuGet.Readme.md" Pack="true" PackagePath="\readme.md" />
  </ItemGroup>
</Project>
